#!/usr/bin/env sh
set -e

echo "Running pre-commit hook..."

# Add nodejs to PATH for Git Bash
export PATH="$PATH:/c/Program Files/nodejs"

# Now npm and node should both work
if command -v npm >/dev/null 2>&1; then
echo "Using Windows npm (nodejs added to PATH)..."
npm exec lint-staged -- --config ./config/lint-staged.config.json
else
echo "ERROR: npm still not found after adding nodejs to PATH"
exit 1
fi

echo "Pre-commit checks passed!"